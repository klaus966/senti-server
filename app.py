from flask import Flask, jsonify
from flask_cors import CORS
import firebase_admin
from firebase_admin import credentials, firestore
import numpy as np

class NaiveBayesClassifier:
    def __init__(self):
        self.vocab = set()
        self.class_probabilities = {}
        self.word_probabilities = {}

    def _tokenize(self, text):
        return text.lower().split()

    def _compute_word_counts(self, texts, labels):
        word_counts = {}
        class_counts = {}

        for text, label in zip(texts, labels):
            tokens = self._tokenize(text)
            class_counts[label] = class_counts.get(label, 0) + 1

            for word in tokens:
                if word not in self.vocab:
                    self.vocab.add(word)

                if label not in word_counts:
                    word_counts[label] = {}

                word_counts[label][word] = word_counts[label].get(word, 0) + 1

        return word_counts, class_counts

    def _compute_class_probabilities(self, class_counts, num_examples):
        class_probabilities = {}
        for label, count in class_counts.items():
            class_probabilities[label] = count / num_examples
        return class_probabilities

    def _compute_word_probabilities(self, word_counts, class_counts, alpha=1):
        word_probabilities = {}
        for label, counts in word_counts.items():
            word_probabilities[label] = {}
            total_words = sum(counts.values())

            for word in self.vocab:
                word_count = counts.get(word, 0)
                word_probabilities[label][word] = (word_count + alpha) / (total_words + alpha * len(self.vocab))

        return word_probabilities

    def train(self, texts, labels):
        word_counts, class_counts = self._compute_word_counts(texts, labels)
        self.class_probabilities = self._compute_class_probabilities(class_counts, len(texts))
        self.word_probabilities = self._compute_word_probabilities(word_counts, class_counts)

    def _predict_single(self, text):
        tokens = self._tokenize(text)
        scores = {label: np.log(prob) for label, prob in self.class_probabilities.items()}

        for label, word_probs in self.word_probabilities.items():
            for word in tokens:
                scores[label] += np.log(word_probs.get(word, 1 / (sum(word_probs.values()) + 1)))

        return max(scores, key=scores.get)

    def predict(self, texts):
        return [self._predict_single(text) for text in texts]

app = Flask(__name__)
CORS(app)

# Use the service account key JSON file
cred = credentials.Certificate('senti-chat-5f464-firebase-adminsdk-3hx8f-c59930a390.json')
firebase_admin.initialize_app(cred)

db = firestore.client()

texts = ["1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 793 794 795 796 797 798 799 800 801 802 803 804 805 806 807 808 809 810 811 812 813 814 815 816 817 818 819 820 821 822 823 824 825 826 827 828 829 830 831 832 833 834 835 836 837 838 839 840 841 842 843 844 845 846 847 848 849 850 851 852 853 854 855 856 857 858 859 860 861 862 863 864 865 866 867 868 869 870 871 872 873 874 875 876 877 878 879 880 881 882 883 884 885 886 887 888 889 890 891 892 893 894 895 896 897 898 899 900 901 902 903 904 905 906 907 908 909 910 911 912 913 914 915 916 917 918 919 920 921 922 923 924 925 926 927 928 929 930 931 932 933 934 935 936 937 938 939 940 941 942 943 944 945 946 947 948 949 950 951 952 953 954 955 956 957 958 959 960 961 962 963 964 965 966 967 968 969 970 971 972 973 974 975 976 977 978 979 980 981 982 983 984 985 986 987 988 989 990 991 992 993 994 995 996 997 998 999 1000 1001 1002 1003 1004 1005 1006 1007 1008 1009",
"play Australian BASE BMX Babe Barcelona Barry Bayern Bolt Bonds Bowl Brady Bryant Bundesliga Call Champions Chelsea Clasico Counter-Strike Cricket Cup Curry D-box DRS Djokovic Dodger Dota Durant Duty El España Europa Federer Fenway Football Formula Fortnite France French GT Gaelic Game Giro Global Grand Hank Hawk-eye IndyCar Italia James Jerry Joe Jordan Kevin Kobe LBW La LeBron League Legends Liga Ligue Liverpool MLB MMA MVP Madrid Mahomes Manchester Manning Masters Mbappe Messi Michael Mike Montana MotoGP Muay Muhammad Munich NASCAR NBA NFL NHL Nadal Nations Neymar Novak ODI Offensive Ohtani Olympics Open PGA Park Patrick Peyton Phelps Premier Rafael Real Rice Roger Ronaldo Rugby Ruth Salah Serena Serie Series Shohei Six Slam Stadium Stanley Star Stephen Super T20 Test Thai Tom Tour Tournament Trout UFC US United Usain VAR Vuelta WNBA Williams Wimbledon World Yankee Zamboni a ace action advantage aerobics aikido air all-rounder alley alley-oop american analyst apex appeal applause arc archery area arena armband artificial arts assist assistant at athletics atmosphere attack attacker attacking audible average back backboard backhand backlift backstroke backward badminton bail balance balk ball barbell bars base baseball baseline baseman basketball bat batsman batting beam beamer beater behind belt bench best biathlete biathlon bicycle bike birdie bishop blades blind blitz block blocker blue bobsled bobsleigh boccia bogey booking boot boots bounce bouncer boundary bowled bowler bowling box boxing brace bracket break breaststroke bullet bullpen bunker burnout butterfly buzzer by bye cage camogie canoe captain car card cardio carrom castling catch catcher caught celebration center centre century championship change chanting check checkmate cheer cheerleading chequered chess chest chicane chip circle class classes clean clearance cleats climbing clinch clock closer coach combine commentator conversion corner cornerback count counterattack cover coverdrives coxless coxswain crease crew cricket cross crossbar crossfit crossover cup curling curve cut cycling d data de decathlete decathlon declaration deep defence defender defense defensive deuce diagonal dig dime dinghy direct discus dive diving dojo doosra double down draft drag dressage dribble drifting drill drive driver drop drop-goal dugout dumbbell dunk eagle eight elliptical en end endurance enforcer engineer equestrian ergometer error esports eventing extra extreme faceoff fairway false fans fantasy fast fencer fencing field fielder fielding fifa figure finals fine first five flag flagpost flexibility flick floodlights floor fly foil follow football footwork forehand formation forward foul four free freestyle fu fuel full full-court full-time fumble gaelic game games give-and-go glance gloves goal goalball goalie goalkeeper goalpost goaltender golden golf googly grand grappling grass green grid grip ground guard guards gully gymnastics half-century half-circle half-way halftime halfway hat hat-trick haul haymaker header heavyweight helicopter helmet heptathlete heptathlon high hit hitter hockey holding home hook hooligans hoop horse horsepower hotspot huddle hurdles hurling hustle hypercar icing in indirect injury inlap inning innings interception iron jab javelin jerk jersey jibe judge judo jump jumping karate karting kata kayak keelboat kettlebell kick kickoff kingside kit knight knockout kung lane lap layup lbw league leave leeward left leg leg-spinner libero line linebacker lineman lineout lines linesman lofted long long-distance lower luge lunge machine maiden man man-marking man-to-man manager marathon mark marking markings marshals martial mascot match maul medal medium medley messi mid mid-off mid-on middle middle-order midfield midfielder midwicket minute motocross motorsports mountain net nickel nightwatchman nine nitro no nutmeg octagon off off-side off-spinner offensive offside offsides olympics on one-two oop opening order orthodox other out outlap over overtime own pace pad paddock pads pair par paralympic parkour parry partnership pass passant pawn peloton penalty pentathlete pentathlon perfect personal pick pick-and-roll piece pilates piste pit pitch pitcher pitching play playbook playmaker playoffs poacher podium point pointer points pole polo pom-poms pool position positions post power powerplay press principal prosthetic puck pull punch punt put putt putter quadruple qualifying quarter-mile quarterback queenside race racing racquet rally rate rebound receiver record red referee regatta relay restrictions return reverse rider right ring rink riposte road rock rook rope rotation round roundhouse rowing ruck rugby run run-up runner running sabre sack sacrifice safety sailing sanda sandbag save score scoreboard screen scrimmage scrum scull sculls seam second seeding serve set setter sevens sheet shift shin shoes shooting shootout short shorts shortstop shot show silly simulator single sitting six six-yard sixer skateboarding skating skeleton ski skiing skipper slam slap slice slide sliding sliotar slip slipstream slog slower small snap snatch snickometer snowboard snowboarding soccer socks southpaw sparring special specialist speed spike spiker spikes spin spiral sports spot sprint sprinter square squash stadium stage stalemate stance standings stands steal step stint stolen stop stoppage strategy streamer strike strikeout striker stroke stump stumped stumping submission substitute substitution sumo supercar supporters surfing sweep sweeper swimming swing swish switch table tack tackle tactics taekwondo tail-ender tapout target team teams technical technology tee telemetry tennis terrace the third three three-pointer through throw throw-in tight time timeout tire to toss touch touchdown touchline tournament track trap travel treadmill triathlete triathlon trick triple try turf turnover twelfth two two-point ucl ultramarathoner ultras umpire uneven uppercut vault vaulting video violation volley volleyball walk wall water weight weightlifting wheelchair whistle wicket wicketkeeper wide wildcard win windward wing winger winter woodwork world wrestling yellow yoga yorker zonal zone épée ",
    "ANOVA AUC Abdominal Accelerometer Accuracy Acid Activities Actuarial Acupuncture Adaptation Aerospace Age Agency Aid Alan Albert Alexander Alfred Alkali Alkaline Allergy Alternative Ambulance Amphibian Amplitude Analysis Analytical Anatomy Andromeda Anesthesia Anesthesiology Angular Animal Annelid Antibiotic Antibody Antigen Antoine Arthropod Assistive Asteroid Astronaut Astronomical Astronomy Atlantis Atom Atomic Autotroph Avogadro's Ayurveda BMI Background Bacteria Balance Ballistic Bandage Bang Bar Barbara Bars Base Bayes Bayes' Bayesian BeAcceleration Behavior Bell Belt Bias Big Binomial Biochemistry Biodiversity Biome Biopsy Biostatistics Bird Black Blood Blueshift Bohr Bond Booster Bootstrap Bose-Einstein Boson Box Breslow Brier Burst C-statistic CT Calibration Calorimetry Camouflage Capsule Cardiology Carl Carlo Carnivore Carson Carver Case-control Cast Catalyst Catheter Causation Celestial Cell Central Centrifugal Centripetal Chain Challenger Charles Chart Chemical Chemistry Chi-square Chiropractic Chromosome Circuit Circulation Circulatory Class Classical Classification Cleanliness Clerk Clinic Cloud Cnidarian Cochran's Coefficient Cohort Colonoscopy Colony Columbia Comet Commensalism Communication Community Competition Complementary Compound Conclusion Concordance Conduction Conductor Confidence Conjugate Conservation Constants Constellation Consumer Contagious Control Cooperation Coordination Correlation Cosmic Cosmologist Cosmology Cosmonaut Coulomb's Counseling Counselor Counter Courtship Covalent Cox Cox-Snell Crater Credibility Crick Cross-sectional Crutches Cumulative Curie Current Curve Cytoplasm DNA Dark Darwin Data Dawkins Debris Decomposer Defibrillator Density Dependent Dermatology Descent Descriptive Design Detritivore Development Deviation Diagnosis Diagnostic Differentiation Diffraction Digestion Digestive Dirac Disability Discovery Discriminant Disease Disinfection Displacement Distribution Division Dmitri Docking Doctor Dog Doppler Double-blind Dwarf Dynamics EKG Earth Eastern Echinoderm Eclipse Ecology Ecosystem Edison Education Edward Edwin Effect Einstein Electric Electrical Electricity Electromagnetic Electromagnetism Electron Element Elevator Embryo Emergency Empirical Endeavour Endocrine Endocrinology Endoscopy Energy Engine Enrico Entropy Enzyme Epidemic Epidemiology Equilibrium Ernest Error Erwin Ethology Eukaryote Evolution Exact Excel Excretory Exoplanet Expedition Experiment Experimental Exploration Exponential Extinction Extraterrestrial F-distribution FLACC Faces Factor Family Faraday Fermi Fermion Fetus Feynman Field Fish Fisher's Flare Fleming Flight Florence Fluid Food Force Forceps Formation Formula Fossil Francis Franklin Frequentist Friction Friedman Frontier Fuel Function Fungus Gait Galaxy Galilei Galileo Gamete Gamma Gamma-Ray Garbage Gas Gastroenterology Gateway Geiger Gene General Genes Genetic Genetics Genus George Geriatric Geriatrics Giant Gibbs Gini Glasgow Goodall Graph Gravitational Gravity Gregor Group Growth Gynecology HIV Habitable Habitat Habitats Half-life Halogen Hand Hawking Hazard Hazards Head Health Healthcare Hearing Heart Heat Height Heisenberg Helmet Hematology Herbal Herbivore Heredity Heterotroph Hibernation Higgs Histogram History Hole Holistic Homeobox Homeopathy Homeostasis Homeotic Hooke Hormone Hosmer-Lemeshow Hospital Hubble Hutton Hygiene Hypothesis IADL Immune Immunity Immunization Impact Independent Index Indicator Inertia Infectious Inferential Infrared Inorganic Instrumentation Integrative Interference Internal International Interplanetary Interquartile Interstellar Interval Invertebrate Ion Ionic Isaac Isolation Isotope Jackknife James Jane Jenner Johannes Jonas Joule Junk Junkyard Jupiter Kaplan-Meier Kepler Kepler's Kinematics Kingdom Koch Kolmogorov-Smirnov Kruskal-Wallis Kuiper Lab Landing Landscape Launch Launchpad Lavoisier Law Laws Leakey Leonardo Level Life Lift Light Light-Year Likelihood Limit Line Linus Logistic Logit Logrank Longitudinal Louis Lunar Lung MAP MATLAB MCMC MLE MMSE MRI Magnetic Magnetism Mammal Mammogram Management Maneuver Mann-Whitney Marie Mars Martian Mass Matter Max Maxwell McClintock McFadden's McGill McNemar's McNemar-Bowker Mean Measurement Mechanics Median Medication Medicine Medium Meiosis Mendel Mendeleev Mental Mercury Meta-analysis Metabolism Metal Metallic Metalloid Meteor Method Michael Microwave Midwifery Migration Milky Mimicry Mining Mission Mitochondria Mitosis MoCA Mobility Mode Model Module Molar Molecular Molecule Mollusk Momentum Monomer Monte Moon Morphology Multicellular Multivariate Muscular Mutation Mutualism NRS NSAID Nagelkerke Natural Naturopathy Navigation Nebula Nebulizer Nelson-Aalen Nematode Neonatology Nephrology Neptune Nervous Network Neurological Neurology Neutrino Neutron Newton Newton's Niche Niels Nightingale Nikola Noble Nomenclature Nonmetal Nonparametric Normal Nucleus Null Number Nurse Observation Observatory Obstetrics Occupational Odyssey Ohm Omnivore Oncology One-sample Oort Operation Ophthalmology Ophthalmoscope Opioid Optics Orbit Order Organ Organelle Organic Orthopedics Orthotics Oscillation Otolaryngology Otoscope Outbreak Outlier Outpost Oxidation Oxygen P-value PET PPE Pad Pain Paired Paleontology Pandemic Pap Paradox Parametric Parasitism Parsec Particle Pasteur Pathogen Pathology Patient Paul Pauling Payload Pearson Pediatrics Peer Period Periodic Periodicity Permutation Photon Photosynthesis Phylum Physical Physician Physics Physiology Pie Pioneer Placebo Planck Planet Planetary Plant Plasma Platyhelminth Plot Plotting Pluto Poisson Polymer Polymerization Population Poriferan Position Posterior Potential Power Practitioner Precision Predator Predictive Pregnancy Prescription Pressure Preventive Prey Prior Probability Probe Producer Program Prokaryote Promotion Proportional Propulsion Prosthesis Protein Protist Pseudo Psychiatric Psychiatrist Psychiatry Psychologist Psychology Psychotherapy Public Publication Pulmonology Pulsar Pulse Python Q-Q Quantum Quarantine Quasar R-squared RNA ROC Race Rachel Radiation Radioactivity Radiology Radiometer Randomization Range Rank Rankit Rate Rays Reaction Recovery Red Redox Redshift Reduction Reflexes Refraction Regression Rehabilitation Relativity Reliability Replication Reproducibility Reproduction Reproductive Reptile Research Resonance Respiration Respiratory Results Review Rheumatology Richard Robert Rocket Rosalind Rover Rutherford Sagan Salk Sample Sampling Sanitation Satellite Saturn Scalar Scalpel Scatterplot Schrodinger Science Score Selection Semiconductor Sensation Sensitivity Series Settlement Shower Shuttle Signed-Rank Significance Simulation Single-blind Site Size Skeletal Social Software Solar Sound Space Spacecraft Spaceport Spacewalk Spearman Special Specialist Speciation Species Specificity Spectrum Speech Speed Spin Splint Sports Standard Star Statics Station Statistical Statistics Stem Stephen Sterilization Stethoscope Stoichiometry Stool Stratified String Structure Student's Study Subatomic Suit Sum Sun Superconductor Supermassive Supernova Superposition Surface Surgeon Surgery Survival Suture Symbiosis Syringe System T-test Table Tail Taxonomy Technology Telescope Temperature Tensor Terrestrial Territoriality Tesla Test Testing Theorem Theory Therapy Thermal Thermodynamics Thermometer Thomas Time Tissue Titration Tourism Traditional Transistor Transition Travel Treatment Trophic Turing Two-sample Type Ultrasound Ultraviolet Unicellular Unit Universe Updating Uranus Urine Urology VAS Vaccination Validity Variable Variance Variation Vector Vehicle Velocity Venus Vertebrate Vibration Vinci Virus Vital Volt Voltage Waist Walk Walker Washing Washington Watson Wave Wavelength Way Weak Weather Web Wegener Weibull Weight Well Werner Western Wheelchair White Wilcoxon Wind Work X-Ray Year Youden's Zone Zygote acid ambiphilic astrocyte astrophysics atomic bacteriophage bioinformatics bioprinting blackbody bomb catastrophe centripetal chemistry chromatography collagen condensate convection cosmic cryosphere dating deuteronomy discovery dispersion drift duality effect energy entanglement equation eukaryote exothermic expansion expression field fission folding force fraunhofer fusion gene genetic geothermal haploid heterotroph isotope kinetic ligand line luminescence magnetic magnus mass mathematics mechanics melanin meson metabolite method mitochondria motion muon nematode neutron nuclear nucleic of oligonucleotide oocyte orbital osmosis pH paleontology parallax particle pathogen perihelion permeability photon photosynthesis physicist physics piezoelectric planetesimal polymer positron potential primordial principle protein prove quantum radiation reaction recombinant redshift repressor resonance rnoulli's rock rocket schrodinger science sedimentary soup spectrometry spectroscopy symbiosis t-distribution taxonomy telegraph tendon terrestrial theorem thermodynamics thermostat ultraviolet uncertainty vaccination vector vertebrate viscosity wave ",
"Abrahamic Absurdism Advaita Age Agnosticism Aleatoric Aletheia Alfred Allegory Anagogical Analytic Anamnesis Anti-Realism Antinomy Apophatic Aporia Aquinas Argument Aristotelian Aristotle Asian Atheistic Authenticity Axiology Ayer Baha'i Berkeley Buddhism Categorical Causality Chalmers Chinese Christianity Churchland Coherence Compatibilist Conceptualism Confucianism Consequentialist Constructivism Contradiction Daniel Dasein David Dennett Deontological Descartes Determinism Dharmic Dialectical Dialectics Dualistic Dysteleology East Empiricist Epicurus Epiphenomenalism Epiphenomenon Episteme Epistemological Epistemology Eschatological Esotericism Esse Ethicalism Ethics Eucharist Eudaimonia Existential Existentialism Existentialist Experientialism Faith Fatalistic Formalism Formulation Foundationalism Francisco Futurism Georg George Gettier Gilbert Goodman Gottfried Hedonism Hedonistic Henrik Hermeneutical Hermeticism Hilary Hinduism Holism Holistic Humanism Humanistic Humanitarianism Humanization Hume Hyperrealism Idealism Idealist Idealization Illusionism Imagism Immanence Immanuel Immediacy Immortality Immutability Impartialism Imperative Impressionism Incarnation Indeterminacy Indigenous Individualism Individuation Ineffable Infallibilism Inquisition Intellectualism Interpretivism Introspection Intuitionism Intuitionist Irrationalism Islam Jainism Judaism Justice Kant Kierkegaardian Kuhn's Language Law Legalism Leibniz Liberalism Libertarianism Logic Logical Logocentrism Logos Materialism Materialist Maurice Mechanism Meliorism Merleau Metaphysical Metaphysics Methodological Minimalism Monism Moore's Moral Mysticism Nagel Nativism Natural Naturalism Nelson Neo-Confucianism Neo-Kantianism Neo-Platonism Neo-Thomism New Nihilism Nominalism Nominalist Nondual Numinous Objectivism Objectivist Occasionalism Ontogeny Ontological Other Paganism Panentheism Pantheism Paradox Paradoxical Paul Phenomenalism Phenomenological Phenomenology Philosophy Plato Pluralism Political Ponty Positivism Postmodernism Poststructuralism Pragmatism Pragmatist Praxis Pre-Socratic Presentism Process Psychologism Putnam Putnam's Rationalism Realism Reductionist Reductive Relational Relativism Religions Rene Representationalism Romanticism Ryle Scepticism Scholasticism Scientism Scientology Searle's Secularism Self-Realization Sellars Sensationalism Sentientism Shinto Sikhism Skeptical Skepticism Social Socratic Solipsistic Sophism Spiritualism Stoicism Structuralism Subjectivism Sublime Substantialism Supernaturalism Supersessionism Surrealism Symbolism Syncretism Taoism Teleological Teleology Temporality Theism Theodicy Theological Theoretical Thomas Thomism Torah Transcendence Transcendental Transcendentalism Transcendentalist Transhumanism Transubstantiation Utilitarian Utilitarianism Utopianism Varela Veracity Verificationism Virtue Vitalism Vivekananda Voluntarism Wicca Wilfred Wilhelm Wittgenstein Wright Zen Zoroastrianism a abductive abhyas absolute abyss accept acceptance access act action actuality adequacy aesthetics affirmative afterlife against agnostic ahimsa aloneness ambiguity amor analogy analysis analytic ananda and angst animal animism annihilation anti apocalypse apostasy appearance apriori apriority argument art artificial atheism atheist atman authentically autonomy awakening awareness baptism behavior being belief benevolence bioethics biology birth blasphemy bliss body bound brahman canon catechism categorical categories causation cause cessation charity cherish choice cleanses cluster cognition cognitive coherence coherent collective collectivism command communication communitarianism compassion compatibilism conatus concept consciousness consequentialism consequentialist conservatism consistent constitutive content continental contract contractarianism contradiction conventionalism conversion correspondence counterfactual courage course creation critical cruelty cult darkness datum de death decay deception deceptive deconstruction deconstructionism deconversion dedication deduction deductive definition deflationary deity demon deontic deontological deontology depth despair destiny destruction determination determinism development dharma dialectic dicto different dilemmas dimensional direct directed disbelief discipline disintegration disjunction dispositional dispositive dissonance distinction divine dogma doubt dualism dukkha duty ecological economics education effort egoism elevates eliminative embodied embodiment embrace emergence emotion emphasizing empirical empiricism emptiness end enlightenment entailment environmental epicureanism epistemic epistemological epistemology eschatology essence essential essentialism eternalism ethical ethics evangelism events evil existence existential existentialism exorcism experience experiment explanation explosion external externalism fact facts faith fallacies fallacy fallibilism false falsifiability falsificationism fatalism fate fati fear feminist fictionalism fideism finitude flourishing follow following form formal forms fortitude free freewill function functional functionalism fundamental future games genesis genetic genuinely gettier goal good gratitude grounding growth happiness hard healing hedonism hell heresy hermeneutics higher hindu history holism hope human humanity humankind hypothetico-deductive icon iconoclasm idealism ideas identity idol ignorance illusion imam immanence immorality immortality imperative impermanence incarnation incommensurability indeterminacy indexicality indirect individualism individuation induction inductive informal information innate insecurity instrumental instrumentalism integrate intelligence internal internalism intrinsic introspection intuition intuitionism isolation jihad joy justice justification justified karma kind kindness kinds knowledge language law laws lexical liberalism liberates liberation libertarianism liberty life limitation linguistic liturgical live load logic logical love malevolence mankind materialism mathematics maya meaning means mechanism mental mentalism metaphysics method millenarianism mind misery missionary modality monistic monotheism monotheistic moral morality mortality mythology natural naturalism nature negative negativity nietzsche nihilism nirvana non noncognitivism normative objectivity oblivion obscurity of ontology open optimism order ordering ordinary origin original pain panpsychism pantheism pantheon paradigm paradox particularism peace perception performative performativity perseverance pessimism phenomenal phenomenalism phenomenology philosophy physics pilgrimage plato political polytheism polytheistic positive positivism positivity possible posteriori power practice pragmatism prayer predestination predetermined predicate presence priest primary principle principles priori problem problems procedural proper properties property prophet proposition propositional proselytization providence psychology pump purgatory purifies purpose purposeful qualia qualified qualitative qualities question rabbi race rational rationalism rationality re realism realities reality realization reason reasoned reasoning reductionism refines reflexivity reincarnation relativism religion religious representation representative resilience resurrection revelation right ritual robust robustness room rule rules sacrament sacred salvation sanatana scepticism science scripture secondary secular secularism selection self semantic semantics sense sentience sequitur shamanism shifts significance sin skepticism social solidarity solipsism solitude soteriology soul space spacetime species speech spirit spirituality state states stoicism strategy strength structural structuralism subconscious subjective subjectivism substance suffering superman superstition supervenience supremacy suspension syllogism synagogue synthetic system tabernacle technology teleological teleology theism theist theocracy theodicy theology theophany theorem theory thinking thought thoughts time tithe tradition transcendence transcendental transubstantiation true truth truths type ubermensch ultimate unconscious union universalizability unsatisfactoriness utilitarianism utterance vagueness value vedantic vedic veneration verification vestments violence virtue void volition von vulnerability weakness welcome well what why wickedness will willpower wittgenstein world worlds worship wrong yoga "
]

labels = ["Unclassified","Sports", "Scientific", "Philosophy"]
classifier = NaiveBayesClassifier()
classifier.train(texts, labels)

def fetch_all_messages():
    chatrooms_ref = db.collection('chatrooms')
    chatrooms_docs = chatrooms_ref.stream()

    messages = {}
    for chatroom in chatrooms_docs:
        messages_ref = chatroom.reference.collection('messages')
        messages_docs = messages_ref.stream()

        for message in messages_docs:
            message_data = message.to_dict()
            sender = message_data.get('sender')
            text = message_data.get('text')
            if sender and text:
                if sender not in messages:
                    messages[sender] = []
                messages[sender].append(text)
    return messages

def fetch_user_names():
    users_ref = db.collection('users')
    users_docs = users_ref.stream()

    user_names = {}
    for user in users_docs:
        user_data = user.to_dict()
        uid = user_data.get('uid')
        fullname = user_data.get('fullname')
        if uid and fullname:
            user_names[uid] = fullname
    return user_names

@app.route('/classify_all', methods=['GET'])
def classify_all():
    messages = fetch_all_messages()
    print("Fetched messages:", messages)  # Logging messages
    user_names = fetch_user_names()
    print("Fetched user names:", user_names)  # Logging user names

    user_classifications = {}
    for user, msgs in messages.items():
        if msgs:
            classifications = classifier.predict(msgs)
            print(f"Classifications for user {user} ({user_names.get(user, user)}):", classifications)  # Logging classifications
            user_classifications[user_names.get(user, user)] = classifications
    return jsonify(user_classifications)

if __name__ == '__main__':
    app.run(debug=True)
